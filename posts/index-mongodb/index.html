<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Những điều mình học được về Index trong MongoDB | Thanh HV's Blog</title>
<meta name=keywords content="mongodb,nosql,index"><meta name=description content="Khi làm việc với MongoDB, chắc hẳn bạn đã nghe đến index - một khái niệm tưởng đơn giản nhưng lại có ảnh hưởng rất lớn đến hiệu năng của hệ thống.
Nếu không hiểu rõ cách hoạt động của index, bạn có thể khiến truy vấn chậm đi đáng kể, hoặc tốn nhiều tài nguyên mà không biết lý do.
Trong bài viết này, mình sẽ chia sẻ một cách dễ hiểu nhất về index trong MongoDB: nó là gì, tại sao cần dùng, có những loại nào và hoạt động ra sao."><meta name=author content><link rel=canonical href=https://thanhhv.github.io/posts/index-mongodb/><link crossorigin=anonymous href=/assets/css/stylesheet.36ab24e4c1b924360adfc391166b0e8914323d9d6ffa42a50f9c6c435c5e1831.css integrity="sha256-Nqsk5MG5JDYK38ORFmsOiRQyPZ1v+kKlD5xsQ1xeGDE=" rel="preload stylesheet" as=style><link rel=icon href=https://thanhhv.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://thanhhv.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://thanhhv.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://thanhhv.github.io/apple-touch-icon.png><link rel=mask-icon href=https://thanhhv.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://thanhhv.github.io/posts/index-mongodb/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://thanhhv.github.io/posts/index-mongodb/"><meta property="og:site_name" content="Thanh HV's Blog"><meta property="og:title" content="Những điều mình học được về Index trong MongoDB"><meta property="og:description" content="Khi làm việc với MongoDB, chắc hẳn bạn đã nghe đến index - một khái niệm tưởng đơn giản nhưng lại có ảnh hưởng rất lớn đến hiệu năng của hệ thống.
Nếu không hiểu rõ cách hoạt động của index, bạn có thể khiến truy vấn chậm đi đáng kể, hoặc tốn nhiều tài nguyên mà không biết lý do.
Trong bài viết này, mình sẽ chia sẻ một cách dễ hiểu nhất về index trong MongoDB: nó là gì, tại sao cần dùng, có những loại nào và hoạt động ra sao."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-10-05T10:50:00+07:00"><meta property="article:modified_time" content="2025-10-05T10:50:00+07:00"><meta property="article:tag" content="Mongodb"><meta property="article:tag" content="Nosql"><meta property="article:tag" content="Index"><meta name=twitter:card content="summary"><meta name=twitter:title content="Những điều mình học được về Index trong MongoDB"><meta name=twitter:description content="Khi làm việc với MongoDB, chắc hẳn bạn đã nghe đến index - một khái niệm tưởng đơn giản nhưng lại có ảnh hưởng rất lớn đến hiệu năng của hệ thống.
Nếu không hiểu rõ cách hoạt động của index, bạn có thể khiến truy vấn chậm đi đáng kể, hoặc tốn nhiều tài nguyên mà không biết lý do.
Trong bài viết này, mình sẽ chia sẻ một cách dễ hiểu nhất về index trong MongoDB: nó là gì, tại sao cần dùng, có những loại nào và hoạt động ra sao."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://thanhhv.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Những điều mình học được về Index trong MongoDB","item":"https://thanhhv.github.io/posts/index-mongodb/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Những điều mình học được về Index trong MongoDB","name":"Những điều mình học được về Index trong MongoDB","description":"Khi làm việc với MongoDB, chắc hẳn bạn đã nghe đến index - một khái niệm tưởng đơn giản nhưng lại có ảnh hưởng rất lớn đến hiệu năng của hệ thống.\nNếu không hiểu rõ cách hoạt động của index, bạn có thể khiến truy vấn chậm đi đáng kể, hoặc tốn nhiều tài nguyên mà không biết lý do.\nTrong bài viết này, mình sẽ chia sẻ một cách dễ hiểu nhất về index trong MongoDB: nó là gì, tại sao cần dùng, có những loại nào và hoạt động ra sao.\n","keywords":["mongodb","nosql","index"],"articleBody":"Khi làm việc với MongoDB, chắc hẳn bạn đã nghe đến index - một khái niệm tưởng đơn giản nhưng lại có ảnh hưởng rất lớn đến hiệu năng của hệ thống.\nNếu không hiểu rõ cách hoạt động của index, bạn có thể khiến truy vấn chậm đi đáng kể, hoặc tốn nhiều tài nguyên mà không biết lý do.\nTrong bài viết này, mình sẽ chia sẻ một cách dễ hiểu nhất về index trong MongoDB: nó là gì, tại sao cần dùng, có những loại nào và hoạt động ra sao.\nHãy cùng mình bắt đầu nhé\n1. Index là gì, tại sao lại phải sử dụng index Index trong MongoDB (và cả các database khác) giống như mục lục của một cuốn sách.\nThay vì phải đọc hết từng trang để tìm một từ khóa, bạn chỉ cần mở phần mục lục, thấy trang nào có nội dung cần, rồi nhảy thẳng đến đó.\nHiểu đơn giản thì:\nMỗi collection trong MongoDB là một “cuốn sách” chứa hàng triệu document. Khi bạn query mà không có index, MongoDB phải đọc toàn bộ collection (collection scan), cực kỳ tốn thời gian. Khi bạn tạo index trên field mà bạn hay truy vấn (find, sort, filter…), MongoDB sẽ tạo ra một cấu trúc dữ liệu riêng (thường là B-Tree) để ghi nhớ vị trí của các document có giá trị đó. Tại sao cần dùng index Tăng tốc độ truy vấn: tìm kiếm, lọc, sắp xếp dữ liệu nhanh hơn rất nhiều. Giảm tải hệ thống: MongoDB không phải quét toàn bộ collection → ít I/O hơn, tiết kiệm CPU và RAM. Bắt buộc cho unique constraint: ví dụ unique index đảm bảo không có 2 user có cùng email. Hỗ trợ sort hiệu quả: khi sort() trên field có index, MongoDB không cần sắp xếp thủ công. 2. Các loại index trong MongoDB MongoDB hỗ trợ nhiều loại index khác nhau tùy vào mục đích sử dụng:\n1️⃣ Single Field Index Đánh index trên một field duy nhất, giúp tăng tốc độ truy vấn và sắp xếp theo field đó.\ndb.users.createIndex({ name: 1 }) 2️⃣ Compound Index Đánh index trên nhiều field cùng lúc, thường dùng khi query lọc hoặc sort theo nhiều trường kết hợp.\ndb.users.createIndex({ lastName: 1, firstName: 1 }) 3️⃣ Multikey Index Dùng cho các field có kiểu dữ liệu là mảng.\nMỗi phần tử trong mảng sẽ được index riêng, giúp việc tìm kiếm trong array nhanh hơn.\ndb.users.createIndex({ tags: 1 }) 4️⃣ TTL (Time-To-Live) Index Dùng cho các dữ liệu có thời hạn, giúp MongoDB tự động xóa document sau một khoảng thời gian nhất định.\ndb.sessions.createIndex({ createdAt: 1 }, { expireAfterSeconds: 3600 }) 5️⃣ Partial / Sparse Index Partial Index: chỉ index những document thỏa điều kiện filter. Sparse Index: chỉ index những document có field tồn tại.\nGiúp tiết kiệm dung lượng và tối ưu truy vấn khi dữ liệu không đồng nhất. db.users.createIndex({ age: 1 }, { partialFilterExpression: { age: { $gte: 18 } } }) 6️⃣ Text Index Hỗ trợ tìm kiếm toàn văn (full-text search) trên các chuỗi ký tự, thường dùng cho tính năng tìm kiếm theo từ khóa.\ndb.articles.createIndex({ content: \"text\" }) Ngoài ra, MongoDB còn có các loại index khác như Geospatial, Hashed, hoặc Wildcard — phục vụ cho dữ liệu vị trí, sharding, hoặc schema động, nhưng thực tế ít khi phải dùng đến trong các ứng dụng (một phần mình cũng chưa có làm qua =)) ) .\n3. Cơ chế hoạt động của index trong MongoDB Khi bạn tạo một index, MongoDB sẽ xây dựng một cấu trúc dữ liệu riêng biệt (thường là B-Tree) để lưu các cặp key → pointer, trong đó:\nKey là giá trị của field được đánh index. Pointer là vị trí của document thật trong collection. Cấu trúc này được lưu trong cùng database, không phải là một collection riêng, nhưng về bản chất là một vùng dữ liệu tách biệt được MongoDB quản lý riêng để tối ưu tốc độ truy vấn.\nVí dụ minh họa Collection:\n{ _id: 1, name: \"Gavin\" } { _id: 2, name: \"Thanhhv\" } { _id: 3, name: \"Alice\" } Index { name: 1 } sẽ lưu:\n\"Alice\" → pointer tới doc _id=3 \"Gavin\" → pointer tới doc _id=1 \"Thanhhv\" → pointer tới doc _id=2 Quá trình truy vấn\nKhi có index:\nMongoDB kiểm tra xem field được query có index hay không.\nNếu có, nó tìm trong B-Tree index để xác định pointer → nhảy trực tiếp đến document tương ứng.\nKhông cần đọc toàn bộ collection → tốc độ nhanh, độ phức tạp khoảng O(log n).\nGiả sử: db.users.find({ name: \"Gavin\" })\nMongoDB sẽ tra index, tìm key Gavin và truy cập ngay document _id = 1.\nKhi không có index:\nMongoDB phải quét toàn bộ collection (COLLSCAN), đọc từng document rồi so sánh giá trị field name.\nCách này chậm hơn rất nhiều, đặc biệt khi collection lớn, với độ phức O(n).\nIndex giúp MongoDB truy cập dữ liệu nhanh hơn rất nhiều bằng cách lưu bản đồ giữa giá trị và vị trí document thật. Nếu không có index, MongoDB phải đọc toàn bộ collection để tìm dữ liệu phù hợp, khiến tốc độ truy vấn giảm đáng kể.\n4. Lưu ý khi sử dụng index Mỗi khi bạn insert, update, hoặc delete document, MongoDB phải cập nhật lại index tương ứng, vì vậy sẽ tốn thêm chi phí ghi (write overhead). Do đó, chỉ nên tạo index cho những field thường xuyên dùng để query, filter hoặc sort. Tạo quá nhiều index có thể khiến: Hiệu năng ghi (insert/update) bị chậm đi. MongoDB tiêu tốn nhiều RAM hơn, vì hệ thống cố gắng giữ index trong bộ nhớ để truy vấn nhanh hơn. ⚡ Lời khuyên:\nHãy cân bằng giữa tốc độ đọc và tốc độ ghi.\nTạo index đủ dùng, chọn đúng key — đừng quá nhiều, cũng đừng quá ít.\nCảm ơn bạn đã dành thời gian đọc bài viết này. Nếu có góp ý hoặc thắc mắc, đừng ngại để lại bình luận để chúng ta cùng thảo luận thêm nhé.\n","wordCount":"1030","inLanguage":"en","datePublished":"2025-10-05T10:50:00+07:00","dateModified":"2025-10-05T10:50:00+07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://thanhhv.github.io/posts/index-mongodb/"},"publisher":{"@type":"Organization","name":"Thanh HV's Blog","logo":{"@type":"ImageObject","url":"https://thanhhv.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://thanhhv.github.io/ accesskey=h title="Thanh HV's Blog (Alt + H)">Thanh HV's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://thanhhv.github.io/ title=Home><span>Home</span></a></li><li><a href=https://thanhhv.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://thanhhv.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://thanhhv.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://thanhhv.github.io/about-me/ title="About me"><span>About me</span></a></li><li><a href=https://thanhhv.github.io/wiki/ title=Wiki><span>Wiki</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://thanhhv.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://thanhhv.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Những điều mình học được về Index trong MongoDB</h1><div class=post-meta><span title='2025-10-05 10:50:00 +0700 +07'>October 5, 2025</span>&nbsp;·&nbsp;5 min</div></header><div class=post-content><p>Khi làm việc với MongoDB, chắc hẳn bạn đã nghe đến <strong>index</strong> - một khái niệm tưởng đơn giản nhưng lại có ảnh hưởng rất lớn đến hiệu năng của hệ thống.<br>Nếu không hiểu rõ cách hoạt động của index, bạn có thể khiến truy vấn chậm đi đáng kể, hoặc tốn nhiều tài nguyên mà không biết lý do.</p><p>Trong bài viết này, mình sẽ chia sẻ một cách dễ hiểu nhất về <strong>index trong MongoDB</strong>: nó là gì, tại sao cần dùng, có những loại nào và hoạt động ra sao.</p><p>Hãy cùng mình bắt đầu nhé</p><p><img alt="Index trong mongodb" loading=lazy src=/posts/index-mongodb/mongodb-index-min.png></p><h2 id=1-index-là-gì-tại-sao-lại-phải-sử-dụng-index>1. Index là gì, tại sao lại phải sử dụng index<a hidden class=anchor aria-hidden=true href=#1-index-là-gì-tại-sao-lại-phải-sử-dụng-index>#</a></h2><p><strong>Index</strong> trong MongoDB (và cả các database khác) giống như <strong>mục lục của một cuốn sách</strong>.<br>Thay vì phải đọc hết từng trang để tìm một từ khóa, bạn chỉ cần mở phần mục lục, thấy trang nào có nội dung cần, rồi nhảy thẳng đến đó.</p><p>Hiểu đơn giản thì:</p><ul><li>Mỗi <strong>collection</strong> trong MongoDB là một &ldquo;cuốn sách&rdquo; chứa hàng triệu document.</li><li>Khi bạn query mà <strong>không có index</strong>, MongoDB phải <strong>đọc toàn bộ collection</strong> (<em>collection scan</em>), cực kỳ tốn thời gian.</li><li>Khi bạn <strong>tạo index</strong> trên field mà bạn hay truy vấn (<code>find</code>, <code>sort</code>, <code>filter</code>…), MongoDB sẽ tạo ra <strong>một cấu trúc dữ liệu riêng</strong> (thường là <strong>B-Tree</strong>) để ghi nhớ vị trí của các document có giá trị đó.</li></ul><h3 id=tại-sao-cần-dùng-index>Tại sao cần dùng index<a hidden class=anchor aria-hidden=true href=#tại-sao-cần-dùng-index>#</a></h3><ul><li><strong>Tăng tốc độ truy vấn:</strong> tìm kiếm, lọc, sắp xếp dữ liệu nhanh hơn rất nhiều.</li><li><strong>Giảm tải hệ thống:</strong> MongoDB không phải quét toàn bộ collection → ít I/O hơn, tiết kiệm CPU và RAM.</li><li><strong>Bắt buộc cho unique constraint:</strong> ví dụ <code>unique index</code> đảm bảo không có 2 user có cùng email.</li><li><strong>Hỗ trợ sort hiệu quả:</strong> khi <code>sort()</code> trên field có index, MongoDB không cần sắp xếp thủ công.</li></ul><hr><h2 id=2-các-loại-index-trong-mongodb>2. Các loại index trong MongoDB<a hidden class=anchor aria-hidden=true href=#2-các-loại-index-trong-mongodb>#</a></h2><p>MongoDB hỗ trợ nhiều loại index khác nhau tùy vào mục đích sử dụng:</p><h3 id=1-single-field-index>1️⃣ Single Field Index<a hidden class=anchor aria-hidden=true href=#1-single-field-index>#</a></h3><p>Đánh index trên một field duy nhất, giúp tăng tốc độ truy vấn và sắp xếp theo field đó.</p><pre tabindex=0><code>db.users.createIndex({ name: 1 })
</code></pre><hr><h3 id=2-compound-index>2️⃣ Compound Index<a hidden class=anchor aria-hidden=true href=#2-compound-index>#</a></h3><p>Đánh index trên nhiều field cùng lúc, thường dùng khi query lọc hoặc sort theo nhiều trường kết hợp.</p><pre tabindex=0><code>db.users.createIndex({ lastName: 1, firstName: 1 })
</code></pre><hr><h3 id=3-multikey-index>3️⃣ Multikey Index<a hidden class=anchor aria-hidden=true href=#3-multikey-index>#</a></h3><p>Dùng cho các field có kiểu dữ liệu là mảng.<br>Mỗi phần tử trong mảng sẽ được index riêng, giúp việc tìm kiếm trong array nhanh hơn.</p><pre tabindex=0><code>db.users.createIndex({ tags: 1 })
</code></pre><hr><h3 id=4-ttl-time-to-live-index>4️⃣ TTL (Time-To-Live) Index<a hidden class=anchor aria-hidden=true href=#4-ttl-time-to-live-index>#</a></h3><p>Dùng cho các dữ liệu có thời hạn, giúp MongoDB tự động xóa document sau một khoảng thời gian nhất định.</p><pre tabindex=0><code>db.sessions.createIndex({ createdAt: 1 }, { expireAfterSeconds: 3600 })
</code></pre><hr><h3 id=5-partial--sparse-index>5️⃣ Partial / Sparse Index<a hidden class=anchor aria-hidden=true href=#5-partial--sparse-index>#</a></h3><ul><li><strong>Partial Index:</strong> chỉ index những document thỏa điều kiện filter.</li><li><strong>Sparse Index:</strong> chỉ index những document có field tồn tại.<br>Giúp tiết kiệm dung lượng và tối ưu truy vấn khi dữ liệu không đồng nhất.</li></ul><pre tabindex=0><code>db.users.createIndex({ age: 1 }, { partialFilterExpression: { age: { $gte: 18 } } })
</code></pre><hr><h3 id=6-text-index>6️⃣ Text Index<a hidden class=anchor aria-hidden=true href=#6-text-index>#</a></h3><p>Hỗ trợ tìm kiếm toàn văn (full-text search) trên các chuỗi ký tự, thường dùng cho tính năng tìm kiếm theo từ khóa.</p><pre tabindex=0><code>db.articles.createIndex({ content: &#34;text&#34; })
</code></pre><hr><blockquote><p>Ngoài ra, MongoDB còn có các loại index khác như <strong>Geospatial</strong>, <strong>Hashed</strong>, hoặc <strong>Wildcard</strong> — phục vụ cho dữ liệu vị trí, sharding, hoặc schema động, nhưng thực tế ít khi phải dùng đến trong các ứng dụng (một phần mình cũng chưa có làm qua =)) ) .</p></blockquote><h2 id=3-cơ-chế-hoạt-động-của-index-trong-mongodb>3. Cơ chế hoạt động của index trong MongoDB<a hidden class=anchor aria-hidden=true href=#3-cơ-chế-hoạt-động-của-index-trong-mongodb>#</a></h2><p>Khi bạn tạo một index, MongoDB sẽ xây dựng <strong>một cấu trúc dữ liệu riêng biệt (thường là B-Tree)</strong> để lưu các cặp <code>key → pointer</code>, trong đó:</p><ul><li><strong>Key</strong> là giá trị của field được đánh index.</li><li><strong>Pointer</strong> là vị trí của document thật trong collection.</li></ul><p>Cấu trúc này được lưu trong cùng database, không phải là một collection riêng, nhưng về bản chất là <strong>một vùng dữ liệu tách biệt</strong> được MongoDB quản lý riêng để tối ưu tốc độ truy vấn.</p><hr><h3 id=ví-dụ-minh-họa>Ví dụ minh họa<a hidden class=anchor aria-hidden=true href=#ví-dụ-minh-họa>#</a></h3><p><strong>Collection:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>{ <span style=color:#a6e22e>_id</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Gavin&#34;</span> }
</span></span><span style=display:flex><span>{ <span style=color:#a6e22e>_id</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Thanhhv&#34;</span> }
</span></span><span style=display:flex><span>{ <span style=color:#a6e22e>_id</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>3</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Alice&#34;</span> }
</span></span></code></pre></div><p><strong>Index <code>{ name: 1 }</code> sẽ lưu:</strong></p><pre tabindex=0><code>&#34;Alice&#34;   → pointer tới doc _id=3
&#34;Gavin&#34;   → pointer tới doc _id=1
&#34;Thanhhv&#34; → pointer tới doc _id=2
</code></pre><p><strong>Quá trình truy vấn</strong></p><p>Khi có index:</p><ul><li><p>MongoDB kiểm tra xem field được query có index hay không.</p></li><li><p>Nếu có, nó tìm trong B-Tree index để xác định pointer → nhảy trực tiếp đến document tương ứng.</p></li><li><p>Không cần đọc toàn bộ collection → tốc độ nhanh, độ phức tạp khoảng <strong>O(log n)</strong>.</p></li></ul><p>Giả sử: <code>db.users.find({ name: "Gavin" })</code></p><p>MongoDB sẽ tra index, tìm key <code>Gavin</code> và truy cập ngay document <code>_id = 1</code>.</p><p>Khi không có index:</p><ul><li><p>MongoDB phải quét toàn bộ collection (<code>COLLSCAN</code>), đọc từng document rồi so sánh giá trị field name.</p></li><li><p>Cách này chậm hơn rất nhiều, đặc biệt khi collection lớn, với độ phức <strong>O(n)</strong>.</p></li></ul><blockquote><p>Index giúp MongoDB truy cập dữ liệu nhanh hơn rất nhiều bằng cách lưu bản đồ giữa giá trị và vị trí document thật.
Nếu không có index, MongoDB phải đọc toàn bộ collection để tìm dữ liệu phù hợp, khiến tốc độ truy vấn giảm đáng kể.</p></blockquote><h2 id=4-lưu-ý-khi-sử-dụng-index>4. Lưu ý khi sử dụng index<a hidden class=anchor aria-hidden=true href=#4-lưu-ý-khi-sử-dụng-index>#</a></h2><ul><li>Mỗi khi bạn <strong>insert</strong>, <strong>update</strong>, hoặc <strong>delete</strong> document, MongoDB phải <strong>cập nhật lại index tương ứng</strong>, vì vậy sẽ tốn thêm chi phí ghi (write overhead).</li><li>Do đó, <strong>chỉ nên tạo index</strong> cho những field <strong>thường xuyên dùng để query, filter hoặc sort</strong>.</li><li><strong>Tạo quá nhiều index</strong> có thể khiến:<ul><li>Hiệu năng ghi (<strong>insert/update</strong>) bị chậm đi.</li><li>MongoDB tiêu tốn nhiều <strong>RAM</strong> hơn, vì hệ thống cố gắng giữ index trong bộ nhớ để truy vấn nhanh hơn.</li></ul></li></ul><blockquote><p>⚡ <em>Lời khuyên:</em><br>Hãy cân bằng giữa tốc độ đọc và tốc độ ghi.<br>Tạo index đủ dùng, chọn đúng key — đừng quá nhiều, cũng đừng quá ít.</p></blockquote><hr><p>Cảm ơn bạn đã dành thời gian đọc bài viết này. Nếu có góp ý hoặc thắc mắc, đừng ngại để lại bình luận để chúng ta cùng thảo luận thêm nhé.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://thanhhv.github.io/tags/mongodb/>Mongodb</a></li><li><a href=https://thanhhv.github.io/tags/nosql/>Nosql</a></li><li><a href=https://thanhhv.github.io/tags/index/>Index</a></li></ul><nav class=paginav><a class=prev href=https://thanhhv.github.io/posts/transaction-isolation-level/><span class=title>« Prev</span><br><span>Hiểu về các mức Isolation trong Transaction của SQL</span>
</a><a class=next href=https://thanhhv.github.io/posts/graphql-federation/><span class=title>Next »</span><br><span>Triển khai microservice với GraphQL Federation</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Những điều mình học được về Index trong MongoDB on x" href="https://x.com/intent/tweet/?text=Nh%e1%bb%afng%20%c4%91i%e1%bb%81u%20m%c3%acnh%20h%e1%bb%8dc%20%c4%91%c6%b0%e1%bb%a3c%20v%e1%bb%81%20Index%20trong%20MongoDB&amp;url=https%3a%2f%2fthanhhv.github.io%2fposts%2findex-mongodb%2f&amp;hashtags=mongodb%2cnosql%2cindex"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Những điều mình học được về Index trong MongoDB on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fthanhhv.github.io%2fposts%2findex-mongodb%2f&amp;title=Nh%e1%bb%afng%20%c4%91i%e1%bb%81u%20m%c3%acnh%20h%e1%bb%8dc%20%c4%91%c6%b0%e1%bb%a3c%20v%e1%bb%81%20Index%20trong%20MongoDB&amp;summary=Nh%e1%bb%afng%20%c4%91i%e1%bb%81u%20m%c3%acnh%20h%e1%bb%8dc%20%c4%91%c6%b0%e1%bb%a3c%20v%e1%bb%81%20Index%20trong%20MongoDB&amp;source=https%3a%2f%2fthanhhv.github.io%2fposts%2findex-mongodb%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Những điều mình học được về Index trong MongoDB on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fthanhhv.github.io%2fposts%2findex-mongodb%2f&title=Nh%e1%bb%afng%20%c4%91i%e1%bb%81u%20m%c3%acnh%20h%e1%bb%8dc%20%c4%91%c6%b0%e1%bb%a3c%20v%e1%bb%81%20Index%20trong%20MongoDB"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Những điều mình học được về Index trong MongoDB on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fthanhhv.github.io%2fposts%2findex-mongodb%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Những điều mình học được về Index trong MongoDB on whatsapp" href="https://api.whatsapp.com/send?text=Nh%e1%bb%afng%20%c4%91i%e1%bb%81u%20m%c3%acnh%20h%e1%bb%8dc%20%c4%91%c6%b0%e1%bb%a3c%20v%e1%bb%81%20Index%20trong%20MongoDB%20-%20https%3a%2f%2fthanhhv.github.io%2fposts%2findex-mongodb%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Những điều mình học được về Index trong MongoDB on telegram" href="https://telegram.me/share/url?text=Nh%e1%bb%afng%20%c4%91i%e1%bb%81u%20m%c3%acnh%20h%e1%bb%8dc%20%c4%91%c6%b0%e1%bb%a3c%20v%e1%bb%81%20Index%20trong%20MongoDB&amp;url=https%3a%2f%2fthanhhv.github.io%2fposts%2findex-mongodb%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Những điều mình học được về Index trong MongoDB on ycombinator" href="https://news.ycombinator.com/submitlink?t=Nh%e1%bb%afng%20%c4%91i%e1%bb%81u%20m%c3%acnh%20h%e1%bb%8dc%20%c4%91%c6%b0%e1%bb%a3c%20v%e1%bb%81%20Index%20trong%20MongoDB&u=https%3a%2f%2fthanhhv.github.io%2fposts%2findex-mongodb%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://utteranc.es/client.js repo=thanhhv/blog-comments issue-term=pathname label="💬 comment" theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2025 <a href=https://thanhhv.github.io/>Thanh HV's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>