<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Tổng quan về Hợp đồng Thông minh trong DEX và AMM | Thanh HV's Blog</title>
<meta name=keywords content="blockchain,DEX,smart contract,Uniswap,AMM"><meta name=description content="Hợp đồng thông minh DEX
Trong một sàn giao dịch phi tập trung (DEX) như Uniswap, nhiều hợp đồng thông minh làm việc cùng nhau để cho phép hoán đổi token. Các hợp đồng chính thường bao gồm: Factory, Router, và Pair. Vai trò của từng hợp đồng như sau:
🔹 1. Factory Contract

Là nơi đăng ký chính của các pool thanh khoản (cặp token).
Tạo ra pool thanh khoản mới khi có thêm cặp giao dịch mới.
Lưu trữ ánh xạ giữa các cặp token và địa chỉ của hợp đồng Pair tương ứng.

Các hàm chính:"><meta name=author content><link rel=canonical href=https://thanhhv.github.io/posts/dex/><link crossorigin=anonymous href=/assets/css/stylesheet.36ab24e4c1b924360adfc391166b0e8914323d9d6ffa42a50f9c6c435c5e1831.css integrity="sha256-Nqsk5MG5JDYK38ORFmsOiRQyPZ1v+kKlD5xsQ1xeGDE=" rel="preload stylesheet" as=style><link rel=icon href=https://thanhhv.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://thanhhv.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://thanhhv.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://thanhhv.github.io/apple-touch-icon.png><link rel=mask-icon href=https://thanhhv.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://thanhhv.github.io/posts/dex/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://thanhhv.github.io/posts/dex/"><meta property="og:site_name" content="Thanh HV's Blog"><meta property="og:title" content="Tổng quan về Hợp đồng Thông minh trong DEX và AMM"><meta property="og:description" content="Hợp đồng thông minh DEX Trong một sàn giao dịch phi tập trung (DEX) như Uniswap, nhiều hợp đồng thông minh làm việc cùng nhau để cho phép hoán đổi token. Các hợp đồng chính thường bao gồm: Factory, Router, và Pair. Vai trò của từng hợp đồng như sau:
🔹 1. Factory Contract Là nơi đăng ký chính của các pool thanh khoản (cặp token). Tạo ra pool thanh khoản mới khi có thêm cặp giao dịch mới. Lưu trữ ánh xạ giữa các cặp token và địa chỉ của hợp đồng Pair tương ứng. Các hàm chính:"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-05-18T16:00:00+07:00"><meta property="article:modified_time" content="2025-05-18T16:00:00+07:00"><meta property="article:tag" content="Blockchain"><meta property="article:tag" content="DEX"><meta property="article:tag" content="Smart Contract"><meta property="article:tag" content="Uniswap"><meta property="article:tag" content="AMM"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tổng quan về Hợp đồng Thông minh trong DEX và AMM"><meta name=twitter:description content="Hợp đồng thông minh DEX
Trong một sàn giao dịch phi tập trung (DEX) như Uniswap, nhiều hợp đồng thông minh làm việc cùng nhau để cho phép hoán đổi token. Các hợp đồng chính thường bao gồm: Factory, Router, và Pair. Vai trò của từng hợp đồng như sau:
🔹 1. Factory Contract

Là nơi đăng ký chính của các pool thanh khoản (cặp token).
Tạo ra pool thanh khoản mới khi có thêm cặp giao dịch mới.
Lưu trữ ánh xạ giữa các cặp token và địa chỉ của hợp đồng Pair tương ứng.

Các hàm chính:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://thanhhv.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Tổng quan về Hợp đồng Thông minh trong DEX và AMM","item":"https://thanhhv.github.io/posts/dex/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Tổng quan về Hợp đồng Thông minh trong DEX và AMM","name":"Tổng quan về Hợp đồng Thông minh trong DEX và AMM","description":"Hợp đồng thông minh DEX Trong một sàn giao dịch phi tập trung (DEX) như Uniswap, nhiều hợp đồng thông minh làm việc cùng nhau để cho phép hoán đổi token. Các hợp đồng chính thường bao gồm: Factory, Router, và Pair. Vai trò của từng hợp đồng như sau:\n🔹 1. Factory Contract Là nơi đăng ký chính của các pool thanh khoản (cặp token). Tạo ra pool thanh khoản mới khi có thêm cặp giao dịch mới. Lưu trữ ánh xạ giữa các cặp token và địa chỉ của hợp đồng Pair tương ứng. Các hàm chính:\n","keywords":["blockchain","DEX","smart contract","Uniswap","AMM"],"articleBody":"Hợp đồng thông minh DEX Trong một sàn giao dịch phi tập trung (DEX) như Uniswap, nhiều hợp đồng thông minh làm việc cùng nhau để cho phép hoán đổi token. Các hợp đồng chính thường bao gồm: Factory, Router, và Pair. Vai trò của từng hợp đồng như sau:\n🔹 1. Factory Contract Là nơi đăng ký chính của các pool thanh khoản (cặp token). Tạo ra pool thanh khoản mới khi có thêm cặp giao dịch mới. Lưu trữ ánh xạ giữa các cặp token và địa chỉ của hợp đồng Pair tương ứng. Các hàm chính:\ncreatePair(tokenA, tokenB): Triển khai hợp đồng Pair mới cho cặp tokenA và tokenB. getPair(tokenA, tokenB): Trả về địa chỉ hợp đồng Pair. allPairs(): Trả về danh sách tất cả các cặp đã tạo. Ví dụ:\nNếu người dùng muốn giao dịch Token A ↔ Token B mà chưa có pool, Factory sẽ tạo hợp đồng Pair mới.\n🔹 2. Router Contract Là hợp đồng chính mà người dùng tương tác để hoán đổi token, thêm/bớt thanh khoản và định tuyến giao dịch. Gọi đến Factory để tìm hợp đồng Pair tương ứng. Đảm bảo giá tốt nhất bằng cách định tuyến giao dịch qua nhiều cặp token. Các hàm chính:\nswapExactTokensForTokens(amountIn, minAmountOut, path, recipient, deadline): Hoán đổi amountIn của Token A sang Token B. addLiquidity(tokenA, tokenB, amountA, amountB, minA, minB, to, deadline): Thêm thanh khoản vào một Pair. removeLiquidity(tokenA, tokenB, liquidity, minA, minB, to, deadline): Rút thanh khoản khỏi Pair. Ví dụ:\nNgười dùng muốn đổi Token A sang Token B:\nRouter kiểm tra tuyến giao dịch tối ưu (trực tiếp hoặc qua nhiều cặp). Gọi đến hợp đồng Pair để thực hiện giao dịch. Token được chuyển giao tương ứng. 🔹 3. Pair Contract (Liquidity Pool) Quản lý pool thanh khoản cho một cặp token. Sử dụng công thức AMM sản phẩm không đổi:\nx * y = k\nTrong đó x và y là lượng token dự trữ, k là hằng số không đổi. Các hàm chính:\nswap(amount0Out, amount1Out, to): Thực hiện hoán đổi token. mint(to): Mint token LP (liquidity provider). burn(to): Burn token LP và trả lại token gốc. getReserves(): Trả về lượng token dự trữ. Ví dụ:\nNếu có giao dịch Token A → Token B:\nNgười dùng gửi Token A vào hợp đồng Pair. Pair tính toán số Token B trả lại dựa vào công thức AMM. Gửi Token B cho người dùng, cập nhật dự trữ. 🛠 Các hợp đồng khác trong DEX 🔹 4. Multicall Contract (tùy chọn) Cho phép thực hiện nhiều lệnh gọi hợp đồng trong một giao dịch (ví dụ: kiểm tra nhiều giá cùng lúc). 🔹 5. Fee Collection Contract (tùy chọn) Nếu DEX thu phí giao thức, sẽ có hợp đồng riêng để thu và phân phối phí. 🎯 Cách các hợp đồng phối hợp với nhau Tạo cặp token mới:\nFactory triển khai hợp đồng Pair nếu chưa tồn tại. Thêm thanh khoản:\nNgười dùng gọi Router, Router nạp token vào Pair contract. Người dùng nhận lại token LP. Hoán đổi token:\nNgười dùng gọi Router để hoán đổi. Router tìm đúng Pair và thực hiện swap. Rút thanh khoản:\nNgười dùng trả lại token LP cho Router, Router rút tài sản từ Pair. 🚀 Ví dụ luồng swap Giả sử bạn muốn hoán đổi 100 USDT → ETH trên DEX:\nNgười dùng gọi:\nswapExactTokensForTokens(100 USDT, minETH, [USDT, ETH], recipient, deadline) Router truy xuất hợp đồng Pair (USDT/ETH) từ Factory. Pair tính toán số ETH trả lại theo công thức AMM. Gửi ETH cho người dùng, USDT thêm vào dự trữ. 🔥 Tổng kết Hợp đồng Mục đích Factory Tạo và theo dõi các hợp đồng Pair (pool thanh khoản). Router Xử lý swap, định tuyến, quản lý thanh khoản. Pair Giữ token dự trữ, thực hiện swap theo AMM. Multicall (tuỳ chọn) Gộp nhiều lệnh gọi hợp đồng thành một giao dịch. Fee Collection (tuỳ chọn) Thu và phân phối phí giao thức. Uniswap V2 - Công thức sản phẩm không đổi và cách tính giá Uniswap V2 hoạt động theo mô hình AMM (Automated Market Maker), nơi tính thanh khoản trong pool được duy trì bởi công thức sản phẩm không đổi:\nx * y = k\nTrong đó:\nx = Số lượng Token X trong pool y = Số lượng Token Y trong pool k = Hằng số không đổi sau mỗi giao dịch Ví dụ:\nToken X là ETH Token Y là USDT Thiết lập ban đầu Pool có:\n1000 ETH 500,000 USDT k = 1000 * 500,000 = 500,000,000\nBước 1: Tính giá ban đầu Giá ETH theo USDT:\n1 ETH = 500 USDT\nBước 2: Giao dịch swap Người dùng swap 100 ETH → USDT\nETH trong pool: 1000 → 1100\nUSDT giảm để giữ k = 500,000,000\nBước 3: Tính USDT mới 1100 * y' = 500,000,000 → y' = 454,545.45 USDT\nBước 4: Tính số USDT nhận được 500,000 - 454,545.45 = 45,454.55 USDT\nBước 5: Giá ETH mới 1 ETH ≈ 412.37 USDT\nTóm tắt Trạng thái ETH USDT Giá ETH Trước swap 1000 500,000 500 USDT Sau swap 1100 454,545.45 412.37 USDT Kết luận Tác động giá: Giá ETH giảm vì tỉ lệ thay đổi. Sản phẩm không đổi: k không đổi, đảm bảo thanh khoản. Lợi ích LP: Kiếm phí nhưng có nguy cơ tổn thất tạm thời. Bài viết được mình dịch từ duyquoc1508, cám ơn Quốc vì đã có 1 bài viết quá chi tiết này.\n","wordCount":"921","inLanguage":"en","datePublished":"2025-05-18T16:00:00+07:00","dateModified":"2025-05-18T16:00:00+07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://thanhhv.github.io/posts/dex/"},"publisher":{"@type":"Organization","name":"Thanh HV's Blog","logo":{"@type":"ImageObject","url":"https://thanhhv.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://thanhhv.github.io/ accesskey=h title="Thanh HV's Blog (Alt + H)">Thanh HV's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://thanhhv.github.io/ title=Home><span>Home</span></a></li><li><a href=https://thanhhv.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://thanhhv.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://thanhhv.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://thanhhv.github.io/cv/ title=CV><span>CV</span></a></li><li><a href=https://thanhhv.github.io/wiki/ title=Wiki><span>Wiki</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://thanhhv.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://thanhhv.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Tổng quan về Hợp đồng Thông minh trong DEX và AMM</h1><div class=post-meta><span title='2025-05-18 16:00:00 +0700 +07'>May 18, 2025</span>&nbsp;·&nbsp;5 min</div></header><div class=post-content><h2 id=hợp-đồng-thông-minh-dex>Hợp đồng thông minh DEX<a hidden class=anchor aria-hidden=true href=#hợp-đồng-thông-minh-dex>#</a></h2><p>Trong một sàn giao dịch phi tập trung (DEX) như Uniswap, nhiều hợp đồng thông minh làm việc cùng nhau để cho phép hoán đổi token. Các hợp đồng chính thường bao gồm: <strong>Factory</strong>, <strong>Router</strong>, và <strong>Pair</strong>. Vai trò của từng hợp đồng như sau:</p><h3 id=-1-factory-contract>🔹 1. Factory Contract<a hidden class=anchor aria-hidden=true href=#-1-factory-contract>#</a></h3><ul><li>Là nơi đăng ký chính của các pool thanh khoản (cặp token).</li><li>Tạo ra pool thanh khoản mới khi có thêm cặp giao dịch mới.</li><li>Lưu trữ ánh xạ giữa các cặp token và địa chỉ của hợp đồng Pair tương ứng.</li></ul><p><strong>Các hàm chính:</strong></p><ul><li><code>createPair(tokenA, tokenB)</code>: Triển khai hợp đồng Pair mới cho cặp tokenA và tokenB.</li><li><code>getPair(tokenA, tokenB)</code>: Trả về địa chỉ hợp đồng Pair.</li><li><code>allPairs()</code>: Trả về danh sách tất cả các cặp đã tạo.</li></ul><p><strong>Ví dụ:</strong><br>Nếu người dùng muốn giao dịch Token A ↔ Token B mà chưa có pool, Factory sẽ tạo hợp đồng Pair mới.</p><h3 id=-2-router-contract>🔹 2. Router Contract<a hidden class=anchor aria-hidden=true href=#-2-router-contract>#</a></h3><ul><li>Là hợp đồng chính mà người dùng tương tác để hoán đổi token, thêm/bớt thanh khoản và định tuyến giao dịch.</li><li>Gọi đến Factory để tìm hợp đồng Pair tương ứng.</li><li>Đảm bảo giá tốt nhất bằng cách định tuyến giao dịch qua nhiều cặp token.</li></ul><p><strong>Các hàm chính:</strong></p><ul><li><code>swapExactTokensForTokens(amountIn, minAmountOut, path, recipient, deadline)</code>: Hoán đổi amountIn của Token A sang Token B.</li><li><code>addLiquidity(tokenA, tokenB, amountA, amountB, minA, minB, to, deadline)</code>: Thêm thanh khoản vào một Pair.</li><li><code>removeLiquidity(tokenA, tokenB, liquidity, minA, minB, to, deadline)</code>: Rút thanh khoản khỏi Pair.</li></ul><p><strong>Ví dụ:</strong><br>Người dùng muốn đổi Token A sang Token B:</p><ul><li>Router kiểm tra tuyến giao dịch tối ưu (trực tiếp hoặc qua nhiều cặp).</li><li>Gọi đến hợp đồng Pair để thực hiện giao dịch.</li><li>Token được chuyển giao tương ứng.</li></ul><h3 id=-3-pair-contract-liquidity-pool>🔹 3. Pair Contract (Liquidity Pool)<a hidden class=anchor aria-hidden=true href=#-3-pair-contract-liquidity-pool>#</a></h3><ul><li>Quản lý pool thanh khoản cho một cặp token.</li><li>Sử dụng công thức AMM sản phẩm không đổi:<br><strong>x * y = k</strong><br>Trong đó <code>x</code> và <code>y</code> là lượng token dự trữ, <code>k</code> là hằng số không đổi.</li></ul><p><strong>Các hàm chính:</strong></p><ul><li><code>swap(amount0Out, amount1Out, to)</code>: Thực hiện hoán đổi token.</li><li><code>mint(to)</code>: Mint token LP (liquidity provider).</li><li><code>burn(to)</code>: Burn token LP và trả lại token gốc.</li><li><code>getReserves()</code>: Trả về lượng token dự trữ.</li></ul><p><strong>Ví dụ:</strong><br>Nếu có giao dịch Token A → Token B:</p><ul><li>Người dùng gửi Token A vào hợp đồng Pair.</li><li>Pair tính toán số Token B trả lại dựa vào công thức AMM.</li><li>Gửi Token B cho người dùng, cập nhật dự trữ.</li></ul><h2 id=-các-hợp-đồng-khác-trong-dex>🛠 Các hợp đồng khác trong DEX<a hidden class=anchor aria-hidden=true href=#-các-hợp-đồng-khác-trong-dex>#</a></h2><h3 id=-4-multicall-contract-tùy-chọn>🔹 4. Multicall Contract (tùy chọn)<a hidden class=anchor aria-hidden=true href=#-4-multicall-contract-tùy-chọn>#</a></h3><ul><li>Cho phép thực hiện nhiều lệnh gọi hợp đồng trong một giao dịch (ví dụ: kiểm tra nhiều giá cùng lúc).</li></ul><h3 id=-5-fee-collection-contract-tùy-chọn>🔹 5. Fee Collection Contract (tùy chọn)<a hidden class=anchor aria-hidden=true href=#-5-fee-collection-contract-tùy-chọn>#</a></h3><ul><li>Nếu DEX thu phí giao thức, sẽ có hợp đồng riêng để thu và phân phối phí.</li></ul><h2 id=-cách-các-hợp-đồng-phối-hợp-với-nhau>🎯 Cách các hợp đồng phối hợp với nhau<a hidden class=anchor aria-hidden=true href=#-cách-các-hợp-đồng-phối-hợp-với-nhau>#</a></h2><p><strong>Tạo cặp token mới:</strong></p><ul><li>Factory triển khai hợp đồng Pair nếu chưa tồn tại.</li></ul><p><strong>Thêm thanh khoản:</strong></p><ul><li>Người dùng gọi Router, Router nạp token vào Pair contract.</li><li>Người dùng nhận lại token LP.</li></ul><p><strong>Hoán đổi token:</strong></p><ul><li>Người dùng gọi Router để hoán đổi.</li><li>Router tìm đúng Pair và thực hiện swap.</li></ul><p><strong>Rút thanh khoản:</strong></p><ul><li>Người dùng trả lại token LP cho Router, Router rút tài sản từ Pair.</li></ul><h2 id=-ví-dụ-luồng-swap>🚀 Ví dụ luồng swap<a hidden class=anchor aria-hidden=true href=#-ví-dụ-luồng-swap>#</a></h2><p>Giả sử bạn muốn hoán đổi 100 USDT → ETH trên DEX:</p><ol><li>Người dùng gọi:<br><code>swapExactTokensForTokens(100 USDT, minETH, [USDT, ETH], recipient, deadline)</code></li><li>Router truy xuất hợp đồng Pair (USDT/ETH) từ Factory.</li><li>Pair tính toán số ETH trả lại theo công thức AMM.</li><li>Gửi ETH cho người dùng, USDT thêm vào dự trữ.</li></ol><h2 id=-tổng-kết>🔥 Tổng kết<a hidden class=anchor aria-hidden=true href=#-tổng-kết>#</a></h2><table><thead><tr><th>Hợp đồng</th><th>Mục đích</th></tr></thead><tbody><tr><td>Factory</td><td>Tạo và theo dõi các hợp đồng Pair (pool thanh khoản).</td></tr><tr><td>Router</td><td>Xử lý swap, định tuyến, quản lý thanh khoản.</td></tr><tr><td>Pair</td><td>Giữ token dự trữ, thực hiện swap theo AMM.</td></tr><tr><td>Multicall (tuỳ chọn)</td><td>Gộp nhiều lệnh gọi hợp đồng thành một giao dịch.</td></tr><tr><td>Fee Collection (tuỳ chọn)</td><td>Thu và phân phối phí giao thức.</td></tr></tbody></table><h2 id=uniswap-v2---công-thức-sản-phẩm-không-đổi-và-cách-tính-giá>Uniswap V2 - Công thức sản phẩm không đổi và cách tính giá<a hidden class=anchor aria-hidden=true href=#uniswap-v2---công-thức-sản-phẩm-không-đổi-và-cách-tính-giá>#</a></h2><p>Uniswap V2 hoạt động theo mô hình <strong>AMM</strong> (Automated Market Maker), nơi tính thanh khoản trong pool được duy trì bởi công thức sản phẩm không đổi:</p><p><strong>x * y = k</strong></p><p>Trong đó:</p><ul><li><code>x</code> = Số lượng Token X trong pool</li><li><code>y</code> = Số lượng Token Y trong pool</li><li><code>k</code> = Hằng số không đổi sau mỗi giao dịch</li></ul><p><strong>Ví dụ:</strong></p><ul><li>Token X là <strong>ETH</strong></li><li>Token Y là <strong>USDT</strong></li></ul><h3 id=thiết-lập-ban-đầu>Thiết lập ban đầu<a hidden class=anchor aria-hidden=true href=#thiết-lập-ban-đầu>#</a></h3><p>Pool có:</p><ul><li>1000 ETH</li><li>500,000 USDT</li></ul><p><code>k = 1000 * 500,000 = 500,000,000</code></p><h3 id=bước-1-tính-giá-ban-đầu>Bước 1: Tính giá ban đầu<a hidden class=anchor aria-hidden=true href=#bước-1-tính-giá-ban-đầu>#</a></h3><p>Giá ETH theo USDT:<br><code>1 ETH = 500 USDT</code></p><h3 id=bước-2-giao-dịch-swap>Bước 2: Giao dịch swap<a hidden class=anchor aria-hidden=true href=#bước-2-giao-dịch-swap>#</a></h3><p>Người dùng swap 100 ETH → USDT<br>ETH trong pool: 1000 → 1100<br>USDT giảm để giữ k = 500,000,000</p><h3 id=bước-3-tính-usdt-mới>Bước 3: Tính USDT mới<a hidden class=anchor aria-hidden=true href=#bước-3-tính-usdt-mới>#</a></h3><p><code>1100 * y' = 500,000,000 → y' = 454,545.45 USDT</code></p><h3 id=bước-4-tính-số-usdt-nhận-được>Bước 4: Tính số USDT nhận được<a hidden class=anchor aria-hidden=true href=#bước-4-tính-số-usdt-nhận-được>#</a></h3><p><code>500,000 - 454,545.45 = 45,454.55 USDT</code></p><h3 id=bước-5-giá-eth-mới>Bước 5: Giá ETH mới<a hidden class=anchor aria-hidden=true href=#bước-5-giá-eth-mới>#</a></h3><p><code>1 ETH ≈ 412.37 USDT</code></p><h2 id=tóm-tắt>Tóm tắt<a hidden class=anchor aria-hidden=true href=#tóm-tắt>#</a></h2><table><thead><tr><th>Trạng thái</th><th>ETH</th><th>USDT</th><th>Giá ETH</th></tr></thead><tbody><tr><td>Trước swap</td><td>1000</td><td>500,000</td><td>500 USDT</td></tr><tr><td>Sau swap</td><td>1100</td><td>454,545.45</td><td>412.37 USDT</td></tr></tbody></table><h2 id=kết-luận>Kết luận<a hidden class=anchor aria-hidden=true href=#kết-luận>#</a></h2><ul><li><strong>Tác động giá:</strong> Giá ETH giảm vì tỉ lệ thay đổi.</li><li><strong>Sản phẩm không đổi:</strong> <code>k</code> không đổi, đảm bảo thanh khoản.</li><li><strong>Lợi ích LP:</strong> Kiếm phí nhưng có nguy cơ tổn thất tạm thời.</li></ul><p>Bài viết được mình dịch từ <strong><a href="https://github.com/duyquoc1508/documentation?tab=readme-ov-file#dex-smart-contract">duyquoc1508</a></strong>, cám ơn <strong>Quốc</strong> vì đã có 1 bài viết quá chi tiết này.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://thanhhv.github.io/tags/blockchain/>Blockchain</a></li><li><a href=https://thanhhv.github.io/tags/dex/>DEX</a></li><li><a href=https://thanhhv.github.io/tags/smart-contract/>Smart Contract</a></li><li><a href=https://thanhhv.github.io/tags/uniswap/>Uniswap</a></li><li><a href=https://thanhhv.github.io/tags/amm/>AMM</a></li></ul><nav class=paginav><a class=prev href=https://thanhhv.github.io/posts/bloom-filter/><span class=title>« Prev</span><br><span>Bloom filter là gì và trường hợp sử dụng</span>
</a><a class=next href=https://thanhhv.github.io/posts/nodejs-vs-go/><span class=title>Next »</span><br><span>So sánh Node.js và Golang trong Backend</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Tổng quan về Hợp đồng Thông minh trong DEX và AMM on x" href="https://x.com/intent/tweet/?text=T%e1%bb%95ng%20quan%20v%e1%bb%81%20H%e1%bb%a3p%20%c4%91%e1%bb%93ng%20Th%c3%b4ng%20minh%20trong%20DEX%20v%c3%a0%20AMM&amp;url=https%3a%2f%2fthanhhv.github.io%2fposts%2fdex%2f&amp;hashtags=blockchain%2cDEX%2csmartcontract%2cUniswap%2cAMM"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Tổng quan về Hợp đồng Thông minh trong DEX và AMM on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fthanhhv.github.io%2fposts%2fdex%2f&amp;title=T%e1%bb%95ng%20quan%20v%e1%bb%81%20H%e1%bb%a3p%20%c4%91%e1%bb%93ng%20Th%c3%b4ng%20minh%20trong%20DEX%20v%c3%a0%20AMM&amp;summary=T%e1%bb%95ng%20quan%20v%e1%bb%81%20H%e1%bb%a3p%20%c4%91%e1%bb%93ng%20Th%c3%b4ng%20minh%20trong%20DEX%20v%c3%a0%20AMM&amp;source=https%3a%2f%2fthanhhv.github.io%2fposts%2fdex%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Tổng quan về Hợp đồng Thông minh trong DEX và AMM on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fthanhhv.github.io%2fposts%2fdex%2f&title=T%e1%bb%95ng%20quan%20v%e1%bb%81%20H%e1%bb%a3p%20%c4%91%e1%bb%93ng%20Th%c3%b4ng%20minh%20trong%20DEX%20v%c3%a0%20AMM"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Tổng quan về Hợp đồng Thông minh trong DEX và AMM on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fthanhhv.github.io%2fposts%2fdex%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Tổng quan về Hợp đồng Thông minh trong DEX và AMM on whatsapp" href="https://api.whatsapp.com/send?text=T%e1%bb%95ng%20quan%20v%e1%bb%81%20H%e1%bb%a3p%20%c4%91%e1%bb%93ng%20Th%c3%b4ng%20minh%20trong%20DEX%20v%c3%a0%20AMM%20-%20https%3a%2f%2fthanhhv.github.io%2fposts%2fdex%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Tổng quan về Hợp đồng Thông minh trong DEX và AMM on telegram" href="https://telegram.me/share/url?text=T%e1%bb%95ng%20quan%20v%e1%bb%81%20H%e1%bb%a3p%20%c4%91%e1%bb%93ng%20Th%c3%b4ng%20minh%20trong%20DEX%20v%c3%a0%20AMM&amp;url=https%3a%2f%2fthanhhv.github.io%2fposts%2fdex%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Tổng quan về Hợp đồng Thông minh trong DEX và AMM on ycombinator" href="https://news.ycombinator.com/submitlink?t=T%e1%bb%95ng%20quan%20v%e1%bb%81%20H%e1%bb%a3p%20%c4%91%e1%bb%93ng%20Th%c3%b4ng%20minh%20trong%20DEX%20v%c3%a0%20AMM&u=https%3a%2f%2fthanhhv.github.io%2fposts%2fdex%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://utteranc.es/client.js repo=thanhhv/blog-comments issue-term=pathname label="💬 comment" theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2025 <a href=https://thanhhv.github.io/>Thanh HV's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>